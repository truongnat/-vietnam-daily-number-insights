(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[974],{3897:(e,t,n)=>{"use strict";n.r(t),n.d(t,{default:()=>R});var r=n(7553),s=n(5525),a=n(9233),l=n(3569);function i(){if(!l.env.GEMINI_API_KEY)throw Error("GEMINI_API_KEY environment variable not set");return new a.M4({apiKey:l.env.GEMINI_API_KEY})}let c=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Error("Promise timed out");return new Promise((r,s)=>{let a=setTimeout(()=>{s(n)},t);e.then(e=>{clearTimeout(a),r(e)}).catch(e=>{clearTimeout(a),s(e)})})},o=e=>{if(!e||!e.trim())return console.warn("Received empty or whitespace-only response from model."),null;try{let t=e.replace(/^```json\s*|```$/g,"").trim();if(!t)return console.warn("Response became empty after cleaning markdown wrappers."),null;return JSON.parse(t)}catch(t){return console.error("Failed to parse JSON from model response:",t),console.error("Raw response text:",e),null}},h=async()=>{let e=Error("Ph\xe2n t\xedch kh\xf4ng th\xe0nh c\xf4ng sau nhiều lần thử.");for(let s=1;s<=3;s++)try{console.log("Attempt ".concat(s," to fetch daily analysis..."));let e=i().models.generateContent({model:"gemini-2.5-flash",contents:'\n    Ph\xe2n t\xedch tin tức v\xe0 kết quả xổ số để đưa ra dự đo\xe1n. Nhiệm vụ của bạn gồm ba phần:\n\n    1.  **Ph\xe2n t\xedch Tin tức Việt Nam H\xf4m Nay:** Qu\xe9t c\xe1c tin tức, b\xe0i b\xe1o v\xe0 sự kiện quan trọng ở Việt Nam t\xednh đến 4:00 chiều giờ Việt Nam (GMT+7) h\xf4m nay. Tr\xedch xuất tất cả c\xe1c số c\xf3 hai chữ số (00-99) v\xe0 thống k\xea tần suất xuất hiện của ch\xfang.\n\n    2.  **T\xecm Kết quả Xổ số Ng\xe0y H\xf4m Qua:** Sử dụng Google Search, t\xecm kết quả "Xổ số kiến thiết Miền Bắc" của ng\xe0y h\xf4m qua. Cụ thể, x\xe1c định hai chữ số cuối của giải đặc biệt.\n\n    3.  **Tổng hợp v\xe0 Đề xuất 3 Con Số:** Dựa tr\xean ph\xe2n t\xedch, h\xe3y đề xuất một mảng gồm Đ\xdaNG BA con số may mắn. Mỗi con số phải tu\xe2n theo một chiến lược ri\xeang biệt được m\xf4 tả b\xean dưới.\n\n    Phản hồi của bạn PHẢI l\xe0 một chuỗi đối tượng JSON hợp lệ duy nhất v\xe0 kh\xf4ng c\xf3 g\xec kh\xe1c. Kh\xf4ng bao gồm bất kỳ văn bản giới thiệu, cuộc tr\xf2 chuyện hoặc định dạng markdown n\xe0o như ```json. Đối tượng JSON phải tu\xe2n thủ cấu tr\xfac ch\xednh x\xe1c n\xe0y:\n\n    {\n      "summary": "Một c\xe2u t\xf3m tắt ngắn gọn bằng tiếng Việt về c\xe1c chủ đề sự kiện ch\xednh trong ng\xe0y ở Việt Nam, kh\xf4ng đề cập đến xổ số.",\n      "luckyNumbers": [\n        {\n          "number": "XX",\n          "strategy": "C\xe2n Bằng",\n          "strategyDescription": "Kết hợp tin tức v\xe0 lịch sử",\n          "reasoning": "Giải th\xedch ngắn gọn tại sao con số n\xe0y l\xe0 sự lựa chọn c\xe2n bằng, kết hợp giữa tần suất xuất hiện trong tin tức v\xe0 việc n\xe9 tr\xe1nh c\xe1c con số đ\xe3 ra gần đ\xe2y."\n        },\n        {\n          "number": "YY",\n          "strategy": "Tin Tức N\xf3ng",\n          "strategyDescription": "Dựa ho\xe0n to\xe0n v\xe0o sự kiện",\n          "reasoning": "Giải th\xedch tại sao con số n\xe0y l\xe0 \'n\xf3ng\' nhất, nổi bật nhất trong c\xe1c sự kiện v\xe0 tin tức trong ng\xe0y, bất kể lịch sử xổ số."\n        },\n        {\n          "number": "ZZ",\n          "strategy": "Bất Ngờ",\n          "strategyDescription": "Số \'lạnh\' c\xf3 tiềm năng",\n          "reasoning": "Giải th\xedch tại sao con số n\xe0y l\xe0 một lựa chọn bất ngờ. C\xf3 thể n\xf3 đ\xe3 l\xe2u kh\xf4ng xuất hiện (số \'lạnh\') nhưng một sự kiện đặc biệt h\xf4m nay mang lại dấu hiệu tiềm năng cho n\xf3."\n        }\n      ],\n      "topNumbers": [\n        { "number": "AA", "count": N, "reason": "Giải th\xedch ngắn gọn về sự kiện li\xean quan." },\n        { "number": "BB", "count": M, "reason": "Giải th\xedch ngắn gọn về sự kiện li\xean quan." },\n        { "number": "CC", "count": P, "reason": "Giải th\xedch ngắn gọn về sự kiện li\xean quan." },\n        { "number": "DD", "count": Q, "reason": "Giải th\xedch ngắn gọn về sự kiện li\xean quan." }\n      ],\n      "events": [\n        { "title": "Ti\xeau đề sự kiện", "description": "M\xf4 tả ngắn về sự kiện." }\n      ]\n    }\n\n    **Y\xeau cầu quan trọng:**\n    - Số trong chiến lược "C\xe2n Bằng" TUYỆT ĐỐI KH\xd4NG được tr\xf9ng với hai chữ số cuối của giải đặc biệt ng\xe0y h\xf4m qua.\n    - Cung cấp ch\xednh x\xe1c BA đối tượng trong mảng "luckyNumbers", mỗi đối tượng c\xf3 một chiến lược kh\xe1c nhau.\n    - Liệt k\xea bốn con số xuất hiện thường xuy\xean nhất trong tin tức v\xe0o mảng "topNumbers", sắp xếp theo số lần xuất hiện giảm dần.\n    - TO\xc0N BỘ NỘI DUNG CỦA C\xc1C TRƯỜNG VĂN BẢN PHẢI L\xc0 TIẾNG VIỆT.\n  ',config:{tools:[{googleSearch:{}}],temperature:.3}}),a=await c(e,9e4,Error("Y\xeau cầu tới Gemini đ\xe3 hết thời gian chờ (Thử lần ".concat(s,").")));if(!a.text)throw Error("Kh\xf4ng nhận được phản hồi từ Gemini.");let l=o(a.text);if(l&&l.luckyNumbers&&l.luckyNumbers.length>0){var t,n,r;let e=(null==(r=a.candidates)||null==(n=r[0])||null==(t=n.groundingMetadata)?void 0:t.groundingChunks)||[];return console.log("Successfully fetched and parsed analysis."),{analysis:l,groundingChunks:e}}throw console.error("Parsed analysis is invalid or missing luckyNumbers:",l),Error("M\xf4 h\xecnh đ\xe3 trả về phản hồi kh\xf4ng hợp lệ hoặc trống.")}catch(t){if(e=t instanceof Error?t:Error(String(t)),console.error("Attempt ".concat(s," failed:"),e.message),s<3){let e=2e3*Math.pow(2,s-1);console.log("Retrying in ".concat(e/1e3," seconds...")),await new Promise(t=>setTimeout(t,e))}}throw console.error("All retry attempts failed."),Error("Kh\xf4ng thể lấy dữ liệu ph\xe2n t\xedch sau ".concat(3," lần thử. Lỗi cuối c\xf9ng: ").concat(e.message))},d=async()=>{let e=(()=>{let e=new Date(new Date().toLocaleString("en-US",{timeZone:"Asia/Ho_Chi_Minh"})),t=String(e.getDate()).padStart(2,"0"),n=String(e.getMonth()+1).padStart(2,"0"),r=e.getFullYear();return"".concat(t,"/").concat(n,"/").concat(r)})(),t='\n    Sử dụng Google Search, t\xecm kết quả "Xổ số kiến thiết Miền Bắc" (KQXSMB) cho ng\xe0y '.concat(e,'.\n    Nhiệm vụ của bạn l\xe0 tr\xedch xuất hai chữ số cuối của TẤT CẢ c\xe1c giải. Đặc biệt, t\xecm hai chữ số cuối của giải Đặc Biệt.\n\n    Nếu bạn t\xecm thấy kết quả:\n    - Trả về một đối tượng JSON với hai chữ số cuối của giải đặc biệt trong trường "specialPrize" v\xe0 một mảng chứa hai chữ số cuối của TẤT CẢ c\xe1c giải (bao gồm cả giải đặc biệt v\xe0 c\xe1c giải l\xf4 kh\xe1c) trong trường "allPrizes".\n\n    Nếu bạn KH\xd4NG thể t\xecm thấy kết quả cho ng\xe0y ').concat(e,' sau khi đ\xe3 t\xecm kiếm kỹ lưỡng:\n    - Trả về một đối tượng JSON với trường "specialPrize" c\xf3 gi\xe1 trị l\xe0 null v\xe0 "allPrizes" l\xe0 một mảng rỗng.\n\n    Phản hồi của bạn PHẢI l\xe0 một chuỗi đối tượng JSON hợp lệ duy nhất. Kh\xf4ng th\xeam bất kỳ văn bản, ghi ch\xfa hay markdown n\xe0o.\n    Cấu tr\xfac JSON mong muốn khi c\xf3 kết quả:\n    {\n      "specialPrize": "XX",\n      "allPrizes": ["XX", "XY", "ZA", "BC", "..."]\n    }\n\n    Cấu tr\xfac JSON mong muốn khi KH\xd4NG c\xf3 kết quả:\n    {\n      "specialPrize": null,\n      "allPrizes": []\n    }\n  ');try{console.log("Fetching current day's lottery results for ".concat(e,"..."));let n=i().models.generateContent({model:"gemini-2.5-flash",contents:t,config:{tools:[{googleSearch:{}}],temperature:0}}),r=await c(n,6e4,Error("Y\xeau cầu lấy kết quả xổ số đ\xe3 hết thời gian chờ."));if(!r.text)throw Error("Kh\xf4ng nhận được phản hồi từ Gemini khi lấy kết quả xổ số.");let s=o(r.text);if(s&&"string"==typeof s.specialPrize&&2===s.specialPrize.length&&Array.isArray(s.allPrizes)&&s.allPrizes.length>0)return console.log("Successfully fetched and parsed lottery results."),s;if(s&&null===s.specialPrize)throw console.warn("Model indicated that lottery results for ".concat(e," are not yet available.")),Error("Kết quả xổ số h\xf4m nay chưa c\xf3 hoặc kh\xf4ng thể t\xecm thấy. Vui l\xf2ng thử lại sau \xedt ph\xfat.");throw console.error("Failed to parse lottery result from model response",r.text),Error("M\xf4 h\xecnh trả về dữ liệu kết quả xổ số kh\xf4ng hợp lệ.")}catch(e){throw console.error("Failed to fetch lottery result:",e),e}},m=e=>{let t=new Date(e.toLocaleString("en-US",{timeZone:"Asia/Ho_Chi_Minh"})),n=t.getFullYear(),r=String(t.getMonth()+1).padStart(2,"0"),s=String(t.getDate()).padStart(2,"0");return"".concat(n,"-").concat(r,"-").concat(s)},g=async()=>{try{let e=await fetch("/api/storage/historical");if(!e.ok)throw Error("HTTP error! status: ".concat(e.status));return await e.json()}catch(e){return console.error("Failed to fetch historical data:",e),{}}},x=async()=>{try{let e=m(new Date),t=await fetch("/api/storage/analysis/".concat(e));if(!t.ok){if(404===t.status)return null;throw Error("HTTP error! status: ".concat(t.status))}return await t.json()}catch(e){return console.error("Failed to fetch today's analysis:",e),null}},u=async e=>{try{let t=m(new Date),n=await fetch("/api/storage/analysis/".concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok)throw Error("HTTP error! status: ".concat(n.status))}catch(e){throw console.error("Failed to save analysis:",e),e}},y=async e=>{try{let t=m(new Date),n=await fetch("/api/storage/lottery/".concat(t),{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});if(!n.ok)throw Error("HTTP error! status: ".concat(n.status))}catch(e){throw console.error("Failed to save lottery result:",e),e}},b=()=>(0,r.jsx)("header",{className:"bg-gray-800/50 backdrop-blur-sm p-4 shadow-lg border-b border-gray-700",children:(0,r.jsxs)("div",{className:"container mx-auto flex items-center justify-center space-x-3",children:[(0,r.jsx)(e=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 6v6h4.5m4.5 0a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z"})}),{className:"w-8 h-8 text-blue-400"}),(0,r.jsx)("h1",{className:"text-2xl md:text-3xl font-bold text-transparent bg-clip-text bg-gradient-to-r from-blue-400 to-teal-300",children:"Con Số Nổi Bật H\xe0ng Ng\xe0y Tại Việt Nam"})]})}),p=()=>(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-4 my-16",children:[(0,r.jsx)("div",{className:"w-16 h-16 border-4 border-blue-500 border-t-transparent rounded-full animate-spin"}),(0,r.jsx)("p",{className:"text-gray-400",children:"Đang ph\xe2n t\xedch c\xe1c sự kiện h\xf4m nay tại Việt Nam..."})]}),f=e=>{let{message:t}=e;return(0,r.jsxs)("div",{className:"my-16 flex flex-col items-center justify-center text-center p-6 bg-red-900/20 border border-red-500 rounded-lg max-w-lg mx-auto",children:[(0,r.jsx)(e=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m-9.303 3.376c-.866 1.5.217 3.374 1.948 3.374h14.71c1.73 0 2.813-1.874 1.948-3.374L13.949 3.378c-.866-1.5-3.032-1.5-3.898 0L2.697 16.126ZM12 15.75h.007v.008H12v-.008Z"})}),{className:"w-12 h-12 text-red-400 mb-4"}),(0,r.jsx)("h3",{className:"text-xl font-semibold text-red-300",children:"Đ\xe3 Xảy Ra Lỗi"}),(0,r.jsx)("p",{className:"text-red-400 mt-2 text-sm",children:t})]})},N=e=>{let{number:t,count:n,reason:s,index:a}=e;return(0,r.jsxs)("div",{className:"bg-gray-800 border border-gray-700 rounded-lg p-4 flex flex-col items-center text-center shadow-lg transform hover:scale-105 transition-transform duration-300 h-full",style:{animation:"fadeInUp 0.5s ".concat(100*a,"ms both")},children:[(0,r.jsx)("div",{className:"text-5xl md:text-6xl font-bold text-transparent bg-clip-text bg-gradient-to-br from-teal-300 to-blue-400 mb-2",children:t}),(0,r.jsxs)("div",{className:"text-sm text-gray-400 mb-3",children:["Xuất hiện ",(0,r.jsx)("span",{className:"font-semibold text-white",children:n})," lần"]}),(0,r.jsx)("p",{className:"text-xs text-gray-400 italic mt-auto pt-2 border-t border-gray-700/50 w-full",children:s})]})},v=e=>{let{title:t,description:n}=e;return(0,r.jsxs)("div",{className:"bg-gray-800/60 p-4 rounded-lg border border-gray-700 flex items-start space-x-4",children:[(0,r.jsx)("div",{className:"flex-shrink-0 pt-1",children:(0,r.jsx)(e=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...e,children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 7.5h1.5m-1.5 3h1.5m-7.5 3h7.5m-7.5 3h7.5m3-9h3.375c.621 0 1.125.504 1.125 1.125V18a2.25 2.25 0 0 1-2.25 2.25M16.5 7.5V18a2.25 2.25 0 0 0 2.25 2.25M16.5 7.5V4.875c0-.621-.504-1.125-1.125-1.125H4.125C3.504 3.75 3 4.254 3 4.875V18a2.25 2.25 0 0 0 2.25 2.25h13.5M6 7.5h3v3H6v-3Z"})}),{className:"w-6 h-6 text-gray-500"})}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h3",{className:"font-semibold text-md text-blue-300",children:t}),(0,r.jsx)("p",{className:"text-gray-400 text-sm mt-1",children:n})]})]})},j=e=>{let{strategy:t}=e,n={className:"w-6 h-6 text-gray-900"};switch(t){case"C\xe2n Bằng":return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor",...n,children:(0,r.jsx)("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 3v18m9-9H3"})});case"Tin Tức N\xf3ng":return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M12.963 2.286a.75.75 0 00-1.071 1.071l9 9a.75.75 0 001.071-1.071l-9-9zM12 3a.75.75 0 01.75.75v6.19l1.72-1.72a.75.75 0 111.06 1.06l-3 3a.75.75 0 01-1.06 0l-3-3a.75.75 0 111.06-1.06l1.72 1.72V3.75A.75.75 0 0112 3zM15.963 15a.75.75 0 00-1.071 1.071l4.5 4.5a.75.75 0 001.071-1.071l-4.5-4.5zM17.625 15.328a9 9 0 10-11.25 0 8.966 8.966 0 005.625 5.672 8.966 8.966 0 005.625-5.672zM12 18a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})});case"Bất Ngờ":return(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...n,children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M9.315 7.584C12.195 3.883 16.695 1.5 21.75 1.5a.75.75 0 01.75.75c0 5.056-2.383 9.555-6.084 12.435A.75.75 0 0115.75 15.75v-1.846a.75.75 0 00-.58-.727c-1.952-.447-3.527-1.464-4.663-2.618a.75.75 0 01.22-1.223zM11.25 10.5a.75.75 0 00-1.5 0v2.068a.75.75 0 01-.75.75H7.5a.75.75 0 000 1.5h1.068a.75.75 0 01.75.75v1.068a.75.75 0 001.5 0v-1.068a.75.75 0 01.75-.75h1.068a.75.75 0 000-1.5H12a.75.75 0 01-.75-.75V10.5zM3 4.5a.75.75 0 01.75.75V7.5a.75.75 0 01-1.5 0V5.25A.75.75 0 013 4.5zM4.5 3a.75.75 0 00-.75.75V5.25a.75.75 0 001.5 0V3.75A.75.75 0 004.5 3zM7.5 3a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 017.5 3z",clipRule:"evenodd"})});default:return null}},w=e=>{let{luckyNumber:t,index:n}=e,s=[{bg:"bg-blue-400",shadow:"shadow-blue-500/20",border:"border-blue-400/30"},{bg:"bg-orange-400",shadow:"shadow-orange-500/20",border:"border-orange-400/30"},{bg:"bg-violet-400",shadow:"shadow-violet-500/20",border:"border-violet-400/30"}][n%3];return(0,r.jsxs)("div",{className:"w-full p-4 relative bg-gradient-to-br from-gray-900 to-gray-800/70 rounded-2xl border ".concat(s.border," shadow-lg ").concat(s.shadow," flex flex-col"),style:{animation:"fadeInUp 0.5s ".concat(150*n,"ms both")},children:[(0,r.jsx)("div",{className:"absolute -top-3 -left-3 w-10 h-10 ".concat(s.bg," rounded-full flex items-center justify-center"),children:(0,r.jsx)(j,{strategy:t.strategy})}),(0,r.jsx)("h4",{className:"text-lg font-bold text-center mt-4 text-white",children:t.strategy}),(0,r.jsx)("p",{className:"text-xs text-center text-gray-400 mb-3",children:t.strategyDescription}),(0,r.jsx)("div",{className:"flex-grow flex flex-col items-center justify-center",children:(0,r.jsx)("div",{className:"text-7xl font-black text-center text-white my-2 tracking-wider",style:{textShadow:"0 0 10px rgba(255, 255, 255, 0.2)"},children:t.number})}),(0,r.jsxs)("p",{className:"text-center text-gray-400 italic text-xs mt-3 pt-3 border-t border-gray-700/50",children:['"',t.reasoning,'"']})]})},k=e=>{let{luckyNumbers:t}=e;return(0,r.jsxs)("div",{className:"w-full max-w-6xl mx-auto mb-12 animate-fade-in",children:[(0,r.jsx)("h3",{className:"text-xl md:text-2xl font-bold text-center mb-2 text-transparent bg-clip-text bg-gradient-to-r from-teal-300 to-blue-400",children:"Gợi \xdd Con Số May Mắn"}),(0,r.jsx)("p",{className:"text-sm text-center text-gray-400 mb-6",children:"Ba chiến lược gợi \xfd dựa tr\xean ph\xe2n t\xedch dữ liệu"}),(0,r.jsx)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:t.map((e,t)=>(0,r.jsx)(w,{luckyNumber:e,index:t},t))})]})},S=e=>{let{status:t}=e;return"de"===t?(0,r.jsxs)("div",{className:"flex items-center gap-2 text-amber-300 font-semibold",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5 animate-pulse",children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M10.788 3.21c.448-1.077 1.976-1.077 2.424 0l2.082 5.006a1 1 0 00.95.69h5.272c1.182 0 1.668 1.518.82 2.154l-4.26 3.087a1 1 0 00-.364 1.118l1.598 5.132c.394 1.268-.962 2.37-2.09 1.642l-4.24-3.08a1 1 0 00-1.18 0l-4.24 3.08c-1.128.728-2.484-.374-2.09-1.642l1.598-5.132a1 1 0 00-.364-1.118L2.04 11.06c-.848-.636-.362-2.154.82-2.154h5.272a1 1 0 00.95-.69L10.788 3.21z",clipRule:"evenodd"})}),"Tr\xfang Đề"]}):"lo"===t?(0,r.jsxs)("div",{className:"flex items-center gap-2 text-green-400 font-semibold",children:[(0,r.jsxs)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:[(0,r.jsx)("path",{fillRule:"evenodd",d:"M12.75 6a.75.75 0 00-1.5 0v8.25H9.75a.75.75 0 000 1.5h4.5a.75.75 0 000-1.5h-1.5V6z",clipRule:"evenodd"}),(0,r.jsx)("path",{d:"M5.013 7.427a2.25 2.25 0 013.182 0l4.318 4.318a.75.75 0 001.06 0l4.318-4.318a2.25 2.25 0 013.182 3.182l-4.318 4.318a.75.75 0 000 1.06l4.318 4.318a2.25 2.25 0 01-3.182 3.182l-4.318-4.318a.75.75 0 00-1.06 0l-4.318 4.318a2.25 2.25 0 01-3.182-3.182l4.318-4.318a.75.75 0 000-1.06L5.013 10.61a2.25 2.25 0 010-3.182z"})]}),"Tr\xfang L\xf4"]}):(0,r.jsxs)("div",{className:"flex items-center gap-2 text-gray-500",children:[(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",className:"w-5 h-5",children:(0,r.jsx)("path",{d:"M12 2.25a.75.75 0 01.75.75v.756a49.106 49.106 0 019.166 4.382.75.75 0 01-.334 1.323l-3.344-.836a47.533 47.533 0 00-2.656 3.482.75.75 0 01-1.21-.673l.323-2.031a47.593 47.593 0 00-4.908 4.456.75.75 0 01-1.258-.55l.13-2.68a47.588 47.588 0 00-4.432 4.14.75.75 0 01-1.23-.711l.398-2.39a49.332 49.332 0 01-3.234 2.56.75.75 0 01-.62-1.282A49.023 49.023 0 0111.25 3.006V2.25A.75.75 0 0112 2.25z"})}),"Trượt"]})},C=e=>{let{luckyNumbers:t,lotteryResult:n}=e,s=t.map(e=>{let t=n.specialPrize===e.number,r=n.allPrizes.includes(e.number),s="miss";return t?s="de":r&&(s="lo"),{...e,status:s}}),a=s.some(e=>"miss"!==e.status);return(0,r.jsxs)("div",{className:"w-full max-w-2xl mx-auto my-12 p-6 relative rounded-2xl border ".concat(a?"border-green-400/50":"border-gray-700"," bg-gray-800/50 shadow-xl animate-fade-in"),children:[(0,r.jsx)("h3",{className:"text-xl font-bold text-center mb-4 text-transparent bg-clip-text bg-gradient-to-r from-gray-200 to-gray-400",children:"Đối Chiếu Kết Quả Xổ Số"}),(0,r.jsxs)("div",{className:"flex flex-col items-center text-center",children:[(0,r.jsxs)("div",{className:"mb-4",children:[(0,r.jsx)("p",{className:"text-gray-400",children:"Hai số cuối Giải Đặc Biệt h\xf4m nay:"}),(0,r.jsx)("p",{className:"text-5xl font-bold text-white tracking-widest",style:{textShadow:"0 0 10px rgba(255, 255, 255, 0.3)"},children:n.specialPrize})]}),(0,r.jsx)("div",{className:"w-full my-4 border-t border-gray-700/50"}),(0,r.jsx)("div",{className:"w-full space-y-3",children:s.map((e,t)=>(0,r.jsxs)("div",{className:"flex justify-between items-center bg-gray-900/50 p-3 rounded-lg",children:[(0,r.jsxs)("div",{className:"flex items-center gap-4",children:[(0,r.jsx)("p",{className:"text-4xl font-bold text-gray-300",children:e.number}),(0,r.jsxs)("div",{children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-white",children:e.strategy}),(0,r.jsx)("p",{className:"text-xs text-gray-500",children:e.strategyDescription})]})]}),(0,r.jsx)(S,{status:e.status})]},t))})]})]})},M=e=>{let{analysis:t,lotteryResult:n,isVerifying:s,verificationError:a}=e;return(0,r.jsxs)("div",{className:"w-full max-w-6xl animate-fade-in",children:[(0,r.jsx)("p",{className:"text-center text-gray-400 mb-8 max-w-3xl mx-auto",children:t.summary}),t.luckyNumbers&&t.luckyNumbers.length>0&&(0,r.jsx)(k,{luckyNumbers:t.luckyNumbers}),s&&(0,r.jsxs)("div",{className:"flex flex-col items-center justify-center space-y-3 my-12",children:[(0,r.jsx)("div",{className:"w-10 h-10 border-2 border-teal-400 border-t-transparent rounded-full animate-spin"}),(0,r.jsx)("p",{className:"text-gray-400",children:"Đang đối chiếu với kết quả xổ số..."})]}),a&&(0,r.jsxs)("div",{className:"text-center my-8 text-red-400 bg-red-900/20 p-4 rounded-lg max-w-md mx-auto border border-red-500/50",children:[(0,r.jsx)("p",{className:"font-semibold text-red-300",children:"Lỗi Đối Chiếu"}),(0,r.jsx)("p",{className:"text-sm mt-1",children:a})]}),n&&t.luckyNumbers&&t.luckyNumbers.length>0&&(0,r.jsx)(C,{luckyNumbers:t.luckyNumbers,lotteryResult:n}),(0,r.jsxs)("section",{className:"mb-12",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold text-center mb-6 text-teal-300",children:"C\xe1c Con Số Nổi Bật Trong Tin Tức"}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4 md:gap-6",children:t.topNumbers.map((e,t)=>(0,r.jsx)(N,{number:e.number,count:e.count,reason:e.reason,index:t},t))})]}),(0,r.jsxs)("section",{children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold text-center mb-6 text-teal-300",children:"Nguồn Sự Kiện Ch\xednh"}),(0,r.jsx)("div",{className:"space-y-4",children:t.events.map((e,t)=>(0,r.jsx)(v,{title:e.title,description:e.description},t))})]})]})},T=e=>{let{groundingChunks:t}=e;return 0===t.length?(0,r.jsx)("footer",{className:"w-full text-center p-4 mt-8 border-t border-gray-800",children:(0,r.jsx)("p",{className:"text-xs text-gray-500",children:"Cung cấp bởi Google Gemini"})}):(0,r.jsx)("footer",{className:"w-full p-4 mt-8 border-t border-gray-800",children:(0,r.jsxs)("div",{className:"container mx-auto text-center",children:[(0,r.jsx)("h4",{className:"text-sm font-semibold text-gray-400 mb-2",children:"Nguồn Dữ Liệu"}),(0,r.jsx)("div",{className:"flex flex-wrap justify-center gap-x-4 gap-y-2",children:t.map((e,t)=>(0,r.jsx)("a",{href:e.web.uri,target:"_blank",rel:"noopener noreferrer",className:"text-xs text-blue-400 hover:text-blue-300 hover:underline transition-colors",children:e.web.title||new URL(e.web.uri).hostname},t))}),(0,r.jsx)("p",{className:"text-xs text-gray-600 mt-4",children:"Cung cấp bởi Google Gemini với dữ liệu từ Google Search."})]})})},z=e=>{let{isAfterCutoff:t}=e;return(0,r.jsxs)("div",{className:"w-full max-w-4xl text-center mb-8 p-4 bg-gray-800 rounded-lg border border-gray-700",children:[(0,r.jsxs)("p",{className:"text-lg font-semibold text-gray-300",children:["Ng\xe0y h\xf4m nay (Việt Nam): ",(()=>{let e=new Date;return new Intl.DateTimeFormat("vi-VN",{timeZone:"Asia/Ho_Chi_Minh",year:"numeric",month:"long",day:"numeric"}).format(e)})()]}),(0,r.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:t?"Ph\xe2n t\xedch dựa tr\xean c\xe1c sự kiện được b\xe1o c\xe1o trước 4:00 chiều.":"Đang chờ dữ liệu đầy đủ của ng\xe0y h\xf4m nay. Ph\xe2n t\xedch sẽ ho\xe0n tất sau 4:00 chiều giờ Việt Nam."})]})},P=e=>{let{view:t,setView:n}=e,s="px-4 md:px-6 py-2 text-sm font-semibold rounded-full transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900 whitespace-nowrap",a="bg-blue-600 text-white shadow-md",l="bg-gray-700 text-gray-300 hover:bg-gray-600";return(0,r.jsxs)("div",{className:"flex items-center justify-center p-1 bg-gray-800 rounded-full mb-8 shadow-inner",children:[(0,r.jsx)("button",{onClick:()=>n("daily"),className:"".concat(s," ").concat("daily"===t?a:l),"aria-pressed":"daily"===t,children:"H\xf4m nay"}),(0,r.jsx)("button",{onClick:()=>n("frequency"),className:"".concat(s," ").concat("frequency"===t?a:l),"aria-pressed":"frequency"===t,children:"Tần suất"}),(0,r.jsx)("button",{onClick:()=>n("history"),className:"".concat(s," ").concat("history"===t?a:l),"aria-pressed":"history"===t,children:"Nhật k\xfd"})]})},E=e=>{let{number:t,count:n,maxHeight:s,highlight:a}=e,l=s>0?n/s*100:0,i="bg-gray-700 group-hover:bg-teal-400",c="text-gray-500 group-hover:text-teal-300",o="Số ".concat(t,": ").concat(n," lần");return"hot"===a?(i="bg-orange-500 group-hover:bg-orange-400",c="text-orange-400 font-bold",o="Số N\xf3ng: ".concat(t," (").concat(n," lần)")):"potential"===a?(i="bg-violet-500 group-hover:bg-violet-400",c="text-violet-400 font-bold",o="Số Tiềm Năng: ".concat(t," (").concat(n," lần)")):"cold"===a&&(c="text-cyan-400 font-bold",o="Số Lạnh: ".concat(t," (0 lần)")),(0,r.jsxs)("div",{className:"flex flex-col items-center justify-end h-48 group relative",title:o,children:[(0,r.jsx)("div",{className:"w-full rounded-t-sm transition-all duration-300 ease-out ".concat(i),style:{height:"".concat(l,"%"),minHeight:n>0?"2px":"0"}}),(0,r.jsx)("div",{className:"absolute -top-7 left-1/2 -translate-x-1/2 hidden group-hover:block px-2 py-1 bg-gray-900 border border-gray-600 text-white text-xs rounded-md shadow-lg z-10 whitespace-nowrap",children:o}),(0,r.jsx)("span",{className:"text-xs mt-1 transition-colors ".concat(c),children:t})]})},B=e=>{let{data:t,stats:n}=e,a=(0,s.useMemo)(()=>0===t.size?0:Math.max(...Array.from(t.values()),1),[t]);return(0,r.jsxs)("div",{className:"bg-gray-800/50 p-4 sm:p-6 rounded-xl border border-gray-700",children:[(0,r.jsx)("div",{className:"grid grid-cols-10 sm:grid-cols-20 md:grid-cols-25 lg:grid-cols-25 gap-x-1 gap-y-4",children:Array.from({length:100},(e,s)=>{let l=String(s).padStart(2,"0"),i=t.get(l)||0,c=null;return l===n.hot?c="hot":l===n.potential?c="potential":l===n.cold&&(c="cold"),(0,r.jsx)(E,{number:l,count:i,maxHeight:a,highlight:c},l)})}),(0,r.jsxs)("div",{className:"flex flex-wrap justify-center items-center gap-x-6 gap-y-2 mt-6 text-xs text-gray-400",children:[(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full bg-orange-500"}),"Số N\xf3ng"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full bg-violet-500"}),"Số Tiềm Năng"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full border-2 border-cyan-400"}),"Số Lạnh"]}),(0,r.jsxs)("div",{className:"flex items-center gap-2",children:[(0,r.jsx)("div",{className:"w-3 h-3 rounded-full bg-gray-700"}),"Kh\xe1c"]})]})]})},D=e=>{let{icon:t,label:n,number:s,description:a,colorClass:l}=e;return(0,r.jsxs)("div",{className:"bg-gray-800/80 p-4 rounded-xl border border-gray-700/80 flex items-center space-x-4 h-full",children:[(0,r.jsx)("div",{className:"flex-shrink-0 w-12 h-12 rounded-lg flex items-center justify-center ".concat(l),children:t}),(0,r.jsxs)("div",{className:"flex-1",children:[(0,r.jsx)("p",{className:"text-sm font-semibold text-gray-300",children:n}),(0,r.jsx)("p",{className:"text-3xl font-bold text-white tracking-wider",children:null!=s?s:(0,r.jsx)("span",{className:"text-gray-600",children:"-"})}),(0,r.jsx)("p",{className:"text-xs text-gray-500 mt-1",children:a})]})]})},V=e=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M12.963 2.286a.75.75 0 00-1.071 1.071l9 9a.75.75 0 001.071-1.071l-9-9zM12 3a.75.75 0 01.75.75v6.19l1.72-1.72a.75.75 0 111.06 1.06l-3 3a.75.75 0 01-1.06 0l-3-3a.75.75 0 111.06-1.06l1.72 1.72V3.75A.75.75 0 0112 3zM15.963 15a.75.75 0 00-1.071 1.071l4.5 4.5a.75.75 0 001.071-1.071l-4.5-4.5zM17.625 15.328a9 9 0 10-11.25 0 8.966 8.966 0 005.625 5.672 8.966 8.966 0 005.625-5.672zM12 18a.75.75 0 100-1.5.75.75 0 000 1.5z",clipRule:"evenodd"})}),A=e=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,r.jsx)("path",{d:"M12 1.5a.75.75 0 01.75.75v3.536l1.22-.814a.75.75 0 01.914 1.2l-1.964 1.309 1.964 1.309a.75.75 0 11-.914 1.2l-1.22-.814v3.536a.75.75 0 01-1.5 0v-3.536l-1.22.814a.75.75 0 11-.914-1.2l1.964-1.309-1.964-1.309a.75.T5 0 01.914-1.2l1.22.814V2.25A.75.75 0 0112 1.5zM4.636 7.19a.75.75 0 011.06 0l2.122 2.12.814-1.22a.75.75 0 011.2.914l-1.31 1.964 1.31 1.964a.75.75 0 11-1.2.914l-.814-1.22-2.121 2.121a.75.75 0 11-1.06-1.06l2.12-2.121-2.12-2.121a.75.75 0 010-1.06zM19.364 7.19a.75.75 0 00-1.06 0l-2.122 2.12-.814-1.22a.75.75 0 10-1.2.914l1.31 1.964-1.31 1.964a.75.75 0 101.2.914l.814-1.22 2.121 2.121a.75.75 0 101.06-1.06l-2.12-2.121 2.12-2.121a.75.75 0 000-1.06z"})}),H=e=>(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor",...e,children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M9.315 7.584C12.195 3.883 16.695 1.5 21.75 1.5a.75.75 0 01.75.75c0 5.056-2.383 9.555-6.084 12.435A.75.75 0 0115.75 15.75v-1.846a.75.75 0 00-.58-.727c-1.952-.447-3.527-1.464-4.663-2.618a.75.75 0 01.22-1.223zM11.25 10.5a.75.75 0 00-1.5 0v2.068a.75.75 0 01-.75.75H7.5a.75.75 0 000 1.5h1.068a.75.75 0 01.75.75v1.068a.75.75 0 001.5 0v-1.068a.75.75 0 01.75-.75h1.068a.75.75 0 000-1.5H12a.75.75 0 01-.75-.75V10.5zM3 4.5a.75.75 0 01.75.75V7.5a.75.75 0 01-1.5 0V5.25A.75.75 0 013 4.5zM4.5 3a.75.75 0 00-.75.75V5.25a.75.75 0 001.5 0V3.75A.75.75 0 004.5 3zM7.5 3a.75.75 0 01.75.75v1.5a.75.75 0 01-1.5 0v-1.5A.75.75 0 017.5 3z",clipRule:"evenodd"})}),q=()=>{let[e,t]=(0,s.useState)(30),[n,a]=(0,s.useState)({}),[l,i]=(0,s.useState)(new Map);(0,s.useEffect)(()=>{(async()=>{try{let t=await g(),n=new Date;n.setDate(n.getDate()-e);let r=new Map;if(Object.entries(t).forEach(e=>{let[t,s]=e;new Date(t)>=n&&s.analysis.topNumbers.forEach(e=>{let t=r.get(e.number)||0;r.set(e.number,t+1)})}),r.size>0){let e,n,s=[...r.entries()].reduce((e,t)=>e[1]>t[1]?e:t)[0],l=Array.from({length:100},(e,t)=>String(t).padStart(2,"0")),i=new Set(r.keys()),c=l.filter(e=>!i.has(e));c.length>0&&(e=c[Math.floor(Math.random()*c.length)]);let o=t[m(new Date(Date.now()-864e5))];if(o){let e=o.analysis.topNumbers.map(e=>e.number).filter(e=>2>=(r.get(e)||0));e.length>0&&(n=e[0])}a({hot:s,cold:e,potential:n})}else a({});i(r)}catch(e){console.error("Error fetching and analyzing historical data:",e),a({}),i(new Map)}})()},[e]);let c=(0,s.useMemo)(()=>l.size>0,[l]),o=n=>{let{range:s}=n;return(0,r.jsxs)("button",{onClick:()=>t(s),className:"".concat("px-4 py-1.5 text-xs font-semibold rounded-full transition-all duration-300 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-offset-gray-900"," ").concat(e===s?"bg-blue-600 text-white shadow-md":"bg-gray-700 text-gray-300 hover:bg-gray-600"),children:[s," ng\xe0y"]})};return(0,r.jsxs)("div",{className:"w-full max-w-6xl animate-fade-in text-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-2 text-teal-300",children:"Bảng Ph\xe2n T\xedch Tần Suất"}),(0,r.jsx)("p",{className:"text-gray-400 mb-4",children:"Ph\xe2n t\xedch số lần c\xe1c con số xuất hiện trong top 4 tin tức h\xe0ng ng\xe0y."}),(0,r.jsxs)("div",{className:"flex items-center justify-center p-1 bg-gray-800 rounded-full mb-8 shadow-inner w-fit mx-auto space-x-2",children:[(0,r.jsx)(o,{range:7}),(0,r.jsx)(o,{range:30}),(0,r.jsx)(o,{range:90})]}),c?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4 mb-8 text-left",children:[(0,r.jsx)(D,{icon:(0,r.jsx)(V,{className:"w-6 h-6"}),label:"Số N\xf3ng",number:n.hot,description:"Xuất hiện nhiều nhất trong ".concat(e," ng\xe0y qua."),colorClass:"bg-orange-500/20 text-orange-400"}),(0,r.jsx)(D,{icon:(0,r.jsx)(A,{className:"w-6 h-6"}),label:"Số Lạnh",number:n.cold,description:"Chưa xuất hiện trong ".concat(e," ng\xe0y qua."),colorClass:"bg-cyan-500/20 text-cyan-400"}),(0,r.jsx)(D,{icon:(0,r.jsx)(H,{className:"w-6 h-6"}),label:"Số Tiềm Năng",number:n.potential,description:"Mới nổi gần đ\xe2y sau thời gian im ắng.",colorClass:"bg-violet-500/20 text-violet-400"})]}),(0,r.jsx)(B,{data:l,stats:n})]}):(0,r.jsxs)("div",{className:"mt-16 text-gray-500 bg-gray-800/50 p-8 rounded-lg",children:[(0,r.jsx)("p",{className:"text-lg",children:"Kh\xf4ng c\xf3 đủ dữ liệu lịch sử để hiển thị ph\xe2n t\xedch."}),(0,r.jsx)("p",{className:"text-sm mt-2",children:"H\xe3y quay lại v\xe0o ng\xe0y mai sau khi c\xf3 th\xeam dữ liệu được thu thập."})]})]})},G=e=>{let{count:t,type:n}=e;if(0===t)return null;let s="de"===n,a=s?"Tr\xfang Đề":"Tr\xfang L\xf4";return(0,r.jsx)("span",{className:"px-2 py-0.5 text-xs font-bold rounded-full ".concat(s?"bg-amber-400":"bg-green-500"," ").concat(s?"text-amber-900":"text-green-900"),children:t>1?"".concat(t," ").concat(a):a})},L=e=>{let{dateKey:t,storedData:n}=e,[a,l]=(0,s.useState)(!1),{analysis:i,lotteryResult:c}=n,o=(0,s.useMemo)(()=>new Intl.DateTimeFormat("vi-VN",{year:"numeric",month:"long",day:"numeric",weekday:"long"}).format(new Date(t)),[t]),h=(0,s.useMemo)(()=>{if(!c||!i.luckyNumbers)return{de:0,lo:0,total:0};let e=0,t=0;return i.luckyNumbers.forEach(n=>{c.specialPrize===n.number?e++:c.allPrizes.includes(n.number)&&t++}),{de:e,lo:t,total:e+t}},[c,i.luckyNumbers]);return(0,r.jsxs)("div",{className:"bg-gray-800/70 border border-gray-700 rounded-lg text-left overflow-hidden",children:[(0,r.jsxs)("button",{onClick:()=>l(!a),className:"w-full p-4 flex justify-between items-center hover:bg-gray-700/50 transition-colors duration-200","aria-expanded":a,children:[(0,r.jsxs)("div",{className:"flex-1 text-left",children:[(0,r.jsx)("p",{className:"font-semibold text-lg text-white",children:o}),(0,r.jsxs)("div",{className:"flex items-center gap-3 mt-1",children:[(0,r.jsx)("p",{className:"text-sm text-gray-400",children:"Gợi \xfd:"}),i.luckyNumbers.map(e=>(0,r.jsx)("span",{className:"text-lg font-bold text-gray-200",children:e.number},e.number))]})]}),(0,r.jsx)("div",{className:"flex flex-col items-end gap-2",children:c?(0,r.jsx)(r.Fragment,{children:h.total>0?(0,r.jsxs)("div",{className:"flex gap-2",children:[(0,r.jsx)(G,{count:h.de,type:"de"}),(0,r.jsx)(G,{count:h.lo,type:"lo"})]}):(0,r.jsx)("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full bg-gray-600 text-gray-300",children:"Kh\xf4ng tr\xfang"})}):(0,r.jsx)("span",{className:"px-2 py-0.5 text-xs font-semibold rounded-full bg-blue-800 text-blue-200",children:"Chưa c\xf3 KQ"})}),(0,r.jsx)("svg",{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 20 20",fill:"currentColor",className:"w-5 h-5 text-gray-400 ml-4 transition-transform duration-300 ".concat(a?"rotate-180":""),children:(0,r.jsx)("path",{fillRule:"evenodd",d:"M5.22 8.22a.75.75 0 0 1 1.06 0L10 11.94l3.72-3.72a.75.75 0 1 1 1.06 1.06l-4.25 4.25a.75.75 0 0 1-1.06 0L5.22 9.28a.75.75 0 0 1 0-1.06Z",clipRule:"evenodd"})})]}),a&&(0,r.jsxs)("div",{className:"p-4 md:p-6 border-t border-gray-700 bg-gray-900/50 animate-fade-in-down",children:[(0,r.jsx)("h4",{className:"text-lg font-semibold text-teal-300 mb-4",children:"Chi Tiết Ph\xe2n T\xedch"}),(0,r.jsxs)("p",{className:"text-sm text-gray-400 italic mb-6",children:['"',i.summary,'"']}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h5",{className:"font-semibold text-gray-300 mb-3",children:"C\xe1c Gợi \xdd:"}),(0,r.jsx)("div",{className:"space-y-4",children:i.luckyNumbers.map((e,t)=>(0,r.jsxs)("div",{className:"bg-gray-800 p-3 rounded-md border-l-4 border-gray-600",children:[(0,r.jsxs)("p",{className:"font-bold text-white",children:[e.strategy,": ",(0,r.jsx)("span",{className:"text-xl",children:e.number})]}),(0,r.jsxs)("p",{className:"text-xs text-gray-400 mt-1 italic",children:['"',e.reasoning,'"']})]},t))})]}),(0,r.jsxs)("div",{className:"mb-6",children:[(0,r.jsx)("h5",{className:"font-semibold text-gray-300 mb-3",children:"C\xe1c Con Số Nổi Bật Trong Tin Tức:"}),(0,r.jsx)("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:i.topNumbers.map((e,t)=>(0,r.jsx)(N,{number:e.number,count:e.count,reason:e.reason,index:t},t))})]}),(0,r.jsxs)("div",{children:[(0,r.jsx)("h5",{className:"font-semibold text-gray-300 mb-3",children:"Nguồn Sự Kiện Ch\xednh:"}),(0,r.jsx)("div",{className:"space-y-3",children:i.events.map((e,t)=>(0,r.jsx)(v,{title:e.title,description:e.description},t))})]})]})]})},K=()=>{let[e,t]=(0,s.useState)({}),[n,a]=(0,s.useState)([]);return((0,s.useEffect)(()=>{(async()=>{try{let e=await g();t(e);let n=Object.keys(e).sort((e,t)=>new Date(t).getTime()-new Date(e).getTime());a(n)}catch(e){console.error("Error fetching historical data:",e),t({}),a([])}})()},[]),0===n.length)?(0,r.jsxs)("div",{className:"w-full max-w-4xl text-center mt-16 text-gray-500 bg-gray-800/50 p-8 rounded-lg",children:[(0,r.jsx)("p",{className:"text-lg",children:"Kh\xf4ng c\xf3 dữ liệu lịch sử n\xe0o được t\xecm thấy."}),(0,r.jsx)("p",{className:"text-sm mt-2",children:"Dữ liệu ph\xe2n t\xedch sẽ được lưu lại đ\xe2y mỗi ng\xe0y để bạn c\xf3 thể xem lại."})]}):(0,r.jsxs)("div",{className:"w-full max-w-4xl animate-fade-in text-center",children:[(0,r.jsx)("h2",{className:"text-2xl font-semibold mb-2 text-teal-300",children:"Nhật K\xfd Ph\xe2n T\xedch"}),(0,r.jsx)("p",{className:"text-gray-400 mb-8",children:"Xem lại kết quả ph\xe2n t\xedch v\xe0 độ ch\xednh x\xe1c của c\xe1c gợi \xfd trong qu\xe1 khứ."}),(0,r.jsx)("div",{className:"space-y-4",children:n.map(t=>(0,r.jsx)(L,{dateKey:t,storedData:e[t]},t))})]})},R=()=>{let[e,t]=(0,s.useState)(null),[n,a]=(0,s.useState)([]),[l,i]=(0,s.useState)(null),[c,o]=(0,s.useState)(!0),[m,g]=(0,s.useState)(!1),[N,v]=(0,s.useState)(null),[j,w]=(0,s.useState)(null),[k,S]=(0,s.useState)("daily"),C=(()=>{let e=new Date,t=6e4*e.getTimezoneOffset();return new Date(e.getTime()+t+252e5)})(),E=C.getHours()>=16,B=C.getHours()>18||18===C.getHours()&&C.getMinutes()>=35,D=(0,s.useCallback)(async()=>{o(!0),v(null),i(null);try{let e=await x();if(e){t(e.analysis),a(e.groundingChunks),e.lotteryResult&&i(e.lotteryResult),o(!1);return}}catch(e){console.error("Error fetching stored data:",e)}try{let e=await h();if(e.analysis&&e.analysis.luckyNumbers&&e.analysis.luckyNumbers.length>0){t(e.analysis),a(e.groundingChunks);try{await u({analysis:e.analysis,groundingChunks:e.groundingChunks})}catch(e){console.error("Error saving analysis:",e)}}else v("Kh\xf4ng thể truy xuất ph\xe2n t\xedch hợp lệ. M\xf4 h\xecnh c\xf3 thể đ\xe3 trả về phản hồi trống hoặc kh\xf4ng hợp lệ.")}catch(e){console.error(e),v(e instanceof Error?e.message:"Đ\xe3 xảy ra một lỗi kh\xf4ng x\xe1c định.")}finally{o(!1)}},[]);return(0,s.useEffect)(()=>{"daily"===k&&D()},[k,D]),(0,s.useEffect)(()=>{"daily"===k&&e&&e.luckyNumbers&&e.luckyNumbers.length>0&&B&&!l&&!m&&(async()=>{g(!0),w(null),console.log("Time is after 18:35, fetching today's lottery results...");try{let e=await d();if(e){i(e);try{await y(e)}catch(e){console.error("Error saving lottery result:",e)}}else w("Kh\xf4ng thể lấy kết quả xổ số. Phản hồi kh\xf4ng hợp lệ.")}catch(e){console.error("Error fetching lottery results:",e),w(e instanceof Error?e.message:"Lỗi khi kiểm tra kết quả xổ số.")}finally{g(!1)}})()},[e,k,B,l,m]),(0,r.jsxs)("div",{className:"min-h-screen bg-gray-900 text-white flex flex-col font-sans",children:[(0,r.jsx)(b,{}),(0,r.jsxs)("main",{className:"flex-grow container mx-auto p-4 md:p-8 flex flex-col items-center",children:[(0,r.jsx)(P,{view:k,setView:S}),(()=>{switch(k){case"daily":default:return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(z,{isAfterCutoff:E}),c&&(0,r.jsx)(p,{}),N&&(0,r.jsx)(f,{message:N}),e&&!c&&(0,r.jsx)(M,{analysis:e,lotteryResult:l,isVerifying:m,verificationError:j}),!c&&!e&&!N&&(0,r.jsxs)("div",{className:"text-center mt-16",children:[(0,r.jsx)("p",{className:"text-gray-400",children:"Kh\xf4ng t\xecm thấy dữ liệu được lưu trữ cho ng\xe0y h\xf4m nay."}),(0,r.jsx)("button",{onClick:D,className:"mt-4 px-6 py-3 bg-blue-600 hover:bg-blue-700 rounded-lg text-white font-semibold transition-colors duration-300 shadow-lg",children:"Lấy Số H\xf4m Nay"})]})]});case"frequency":return(0,r.jsx)(q,{});case"history":return(0,r.jsx)(K,{})}})()]}),(0,r.jsx)(T,{groundingChunks:"daily"===k?n:[]})]})}},3957:(e,t,n)=>{Promise.resolve().then(n.bind(n,3897))}},e=>{e.O(0,[628,552,772,358],()=>e(e.s=3957)),_N_E=e.O()}]);